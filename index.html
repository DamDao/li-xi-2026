<!doctype html>
<html lang="vi" class="h-full">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>L·ªôc Xu√¢n - G·ª≠i Trao Y√™u Th∆∞∆°ng</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/_sdk/element_sdk.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&amp;family=Be+Vietnam+Pro:wght@300;400;500;600&amp;display=swap"
        rel="stylesheet" />

    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@600;700;900&display=swap"
        rel="stylesheet" />

    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link href="src/css/style.css" rel="stylesheet" />

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "tet-red": "#8B0000",
                        "tet-red-light": "#B22222",
                        "tet-gold": "#FFD700",
                        "tet-gold-dark": "#DAA520",
                        "tet-cream": "#FFF8DC",
                    },
                    fontFamily: {
                        heading: ["Playfair Display", "serif"],
                        body: ["Be Vietnam Pro", "sans-serif"],
                    },
                },
            },
        };
    </script>
    <style>
        /* Th√™m v√†o ph·∫ßn <head> */
        .font-dancing {
            font-family: 'Dancing Script', cursive;
        }
        
        /* Animation cho scratch overlay */
        .scratched {
            opacity: 0;
            transition: opacity 0.5s ease-out;
        }
        
        /* Animation cho money reveal */
        .money-reveal {
            animation: moneyPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes moneyPop {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
    <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
</head>

<body class="h-full font-body">
    <div id="app-wrapper" class="h-full w-full overflow-auto bg-pattern relative">
        <!-- Decorative Elements -->
        <div class="absolute top-4 left-4 text-4xl lantern opacity-80">üèÆ</div>
        <div class="absolute top-4 right-4 text-4xl lantern opacity-80" style="animation-delay: -2s">
            üèÆ
        </div>
        <div class="absolute top-20 left-1/4 text-2xl floating opacity-60">
            üå∏
        </div>
        <div class="absolute top-32 right-1/4 text-xl floating opacity-50" style="animation-delay: -1s">
            ‚ú®
        </div>
        <div class="absolute bottom-20 left-16 text-3xl floating opacity-70" style="animation-delay: -3s">
            üéã
        </div>
        <div class="absolute bottom-32 right-20 text-2xl floating opacity-60" style="animation-delay: -2s">
            üå∫
        </div>
        <!-- Sparkle decorations -->
        <div class="absolute top-1/4 left-10 w-2 h-2 bg-tet-gold rounded-full sparkle"></div>
        <div class="absolute top-1/3 right-16 w-1.5 h-1.5 bg-tet-gold rounded-full sparkle"
            style="animation-delay: -0.5s"></div>
        <div class="absolute bottom-1/4 left-20 w-2 h-2 bg-tet-gold rounded-full sparkle" style="animation-delay: -1s">
        </div>

        <!-- Main Content -->
        <div class="min-h-full flex flex-col items-center justify-center px-4 py-8 relative z-10">
            <!-- Header Section -->
            <div class="text-center mb-8 md:mb-12">
                <!-- Tagline -->
                <p id="tagline" class="text-tet-cream/80 text-sm md:text-base tracking-widest mb-4 font-light">
                    G·ª≠i trao y√™u th∆∞∆°ng ‚Äì Nh·∫≠n l·ªôc an khang
                </p>
                <!-- Main Heading -->
                <h1 id="main-heading" class="font-heading text-3xl md:text-5xl lg:text-6xl font-bold gold-shimmer mb-2">
                    Ng∆∞·ªùi trao ƒëang g·ª≠i l·ªôc xu√¢n cho..?
                </h1>
                <!-- Decorative line -->
                <div class="flex items-center justify-center gap-3 mt-4">
                    <div class="w-16 md:w-24 h-px bg-gradient-to-r from-transparent via-tet-gold to-transparent"></div>
                    <span class="text-tet-gold text-xl">‚ùÄ</span>
                    <div class="w-16 md:w-24 h-px bg-gradient-to-r from-transparent via-tet-gold to-transparent"></div>
                </div>
            </div>

            <!-- Cards Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 max-w-5xl mx-auto mb-8 md:mb-12">
                <!-- Card 1: √îng B√† -->
                <button class="card-envelope rounded-2xl p-4 md:p-6 text-center cursor-pointer group"
                    data-recipient="ong-ba">
                    <div class="text-4xl md:text-5xl mb-3 group-hover:scale-110 transition-transform">
                        üë¥üëµ
                    </div>
                    <h3 class="font-heading text-tet-gold font-semibold text-lg md:text-xl mb-1">
                        √îng B√†
                    </h3>
                    <p class="text-tet-cream/70 text-xs md:text-sm font-light">
                        K√≠nh ch√∫c s·ª©c kh·ªèe
                    </p>
                </button>

                <!-- Card 2: B·ªë M·∫π -->
                <button class="card-envelope rounded-2xl p-4 md:p-6 text-center cursor-pointer group"
                    data-recipient="bo-me">
                    <div class="text-4xl md:text-5xl mb-3 group-hover:scale-110 transition-transform">
                        üë®‚Äçüë©‚Äçüëß
                    </div>
                    <h3 class="font-heading text-tet-gold font-semibold text-lg md:text-xl mb-1">
                        B·ªë M·∫π
                    </h3>
                    <p class="text-tet-cream/70 text-xs md:text-sm font-light">
                        Bi·∫øt ∆°n d∆∞·ª°ng d·ª•c
                    </p>
                </button>

                <!-- Card 3: Anh Ch·ªã Em -->
                <button class="card-envelope rounded-2xl p-4 md:p-6 text-center cursor-pointer group"
                    data-recipient="anh-chi-em">
                    <div class="text-4xl md:text-5xl mb-3 group-hover:scale-110 transition-transform">
                        üë´
                    </div>
                    <h3 class="font-heading text-tet-gold font-semibold text-lg md:text-xl mb-1">
                        Anh Ch·ªã Em
                    </h3>
                    <p class="text-tet-cream/70 text-xs md:text-sm font-light">
                        ƒê·ªìng h√†nh b√™n nhau
                    </p>
                </button>

                <!-- Card 4: Con C√°i -->
                <button class="card-envelope rounded-2xl p-4 md:p-6 text-center cursor-pointer group"
                    data-recipient="con-cai">
                    <div class="text-4xl md:text-5xl mb-3 group-hover:scale-110 transition-transform">
                        üë∂
                    </div>
                    <h3 class="font-heading text-tet-gold font-semibold text-lg md:text-xl mb-1">
                        Con C√°i
                    </h3>
                    <p class="text-tet-cream/70 text-xs md:text-sm font-light">
                        Mong con kh√¥n l·ªõn
                    </p>
                </button>

                <!-- Card 5: B·∫°n B√® -->
                <button class="card-envelope rounded-2xl p-4 md:p-6 text-center cursor-pointer group"
                    data-recipient="ban-be">
                    <div class="text-4xl md:text-5xl mb-3 group-hover:scale-110 transition-transform">
                        ü§ù
                    </div>
                    <h3 class="font-heading text-tet-gold font-semibold text-lg md:text-xl mb-1">
                        B·∫°n B√®
                    </h3>
                    <p class="text-tet-cream/70 text-xs md:text-sm font-light">
                        Tri k·ª∑ ƒë·ªìng h√†nh
                    </p>
                </button>

                <!-- Card 6: ƒê·ªìng Nghi·ªáp -->
                <button class="card-envelope rounded-2xl p-4 md:p-6 text-center cursor-pointer group"
                    data-recipient="dong-nghiep">
                    <div class="text-4xl md:text-5xl mb-3 group-hover:scale-110 transition-transform">
                        üíº
                    </div>
                    <h3 class="font-heading text-tet-gold font-semibold text-lg md:text-xl mb-1">
                        ƒê·ªìng Nghi·ªáp
                    </h3>
                    <p class="text-tet-cream/70 text-xs md:text-sm font-light">
                        Th√†nh c√¥ng chung
                    </p>
                </button>

                <!-- Card 7: Th·∫ßy C√¥ -->
                <button class="card-envelope rounded-2xl p-4 md:p-6 text-center cursor-pointer group"
                    data-recipient="thay-co">
                    <div class="text-4xl md:text-5xl mb-3 group-hover:scale-110 transition-transform">
                        üìö
                    </div>
                    <h3 class="font-heading text-tet-gold font-semibold text-lg md:text-xl mb-1">
                        Th·∫ßy C√¥
                    </h3>
                    <p class="text-tet-cream/70 text-xs md:text-sm font-light">
                        ∆†n d·∫°y d·ªó s√¢u
                    </p>
                </button>

                <!-- Card 8: Ng∆∞·ªùi Th∆∞∆°ng -->
                <button class="card-envelope rounded-2xl p-4 md:p-6 text-center cursor-pointer group"
                    data-recipient="nguoi-thuong">
                    <div class="text-4xl md:text-5xl mb-3 group-hover:scale-110 transition-transform">
                        üíï
                    </div>
                    <h3 class="font-heading text-tet-gold font-semibold text-lg md:text-xl mb-1">
                        Ng∆∞·ªùi Th∆∞∆°ng
                    </h3>
                    <p class="text-tet-cream/70 text-xs md:text-sm font-light">
                        Y√™u th∆∞∆°ng tr·ªçn ƒë·ªùi
                    </p>
                </button>
            </div>

            <!-- Selected Recipient Display -->
            <div id="selection-display" class="hidden text-center mb-6 animate-pulse">
                <p class="text-tet-cream text-lg">
                    B·∫°n ƒëang g·ª≠i l·ªôc xu√¢n ƒë·∫øn:
                    <span id="selected-name" class="text-tet-gold font-semibold"></span>
                </p>
            </div>

            <!-- Continue Button -->
            <button id="continue-btn"
                class="hidden bg-gradient-to-r from-tet-gold-dark via-tet-gold to-tet-gold-dark text-tet-red font-semibold px-8 py-3 rounded-full text-lg shadow-lg hover:shadow-tet-gold/50 hover:scale-105 transition-all duration-300 mb-8">
                Chao g·ª≠i y√™u th∆∞∆°ng ‚ú®
            </button>

            <!-- Envelopes Grid (hidden by default) -->
            <div id="envelopes-container" class="hidden max-w-6xl mx-auto w-full px-4">
                <div class="text-center mb-8">
                    <h2 class="font-heading text-2xl md:text-3xl font-bold gold-shimmer mb-4">
                        24 Bao L√¨ X√¨ Y√™u Th∆∞∆°ng
                    </h2>
                    <p class="text-tet-cream/70 text-sm md:text-base">
                        Ch·ªçn m·ªôt bao l√¨ x√¨ ƒë·ªÉ g·ª≠i trao y√™u th∆∞∆°ng
                    </p>
                </div>

                <div id="envelopes-grid"
                    class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 md:gap-5 mb-12">
                    <!-- 24 envelopes will be generated here -->
                </div>

                <div class="text-center">
                    <button id="back-btn"
                        class="bg-tet-red-light text-tet-cream font-medium px-6 py-2 rounded-full hover:bg-tet-red transition-all duration-300">
                        ‚Üê Quay l·∫°i ch·ªçn m·ª•c ng∆∞·ªùi nh·∫≠n
                    </button>
                </div>
            </div>

            <!-- Footer -->
            <footer class="text-center">
                <p id="footer-text" class="font-heading text-tet-gold text-xl md:text-2xl mb-2">
                    L·ªôc Xu√¢n 2026
                </p>
                <p class="text-tet-cream/60 text-xs md:text-sm font-light tracking-wide">
                    Trao g·ª≠i y√™u th∆∞∆°ng ‚Ä¢ ƒê√≥n nh·∫≠n an khang
                </p>
                <div class="flex items-center justify-center gap-2 mt-3 text-tet-gold/90">
                    <span>üßß</span>
                    <span class="text-xs">Ch√∫c M·ª´ng NƒÉm M·ªõi</span>
                    <span>üßß</span>
                </div>
            </footer>
        </div>
    </div>

    <!-- Modal T√¢m Th∆∞ & L·ªôc Xu√¢n -->
    <div id="heart-letter-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/70"></div>
        <div class="relative bg-gradient-to-br from-red-50 to-amber-50 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden border-4 border-tet-gold">
            <!-- Header -->
            <div class="bg-gradient-to-r from-tet-red to-tet-red-light py-4 px-6 text-center">
                <h2 class="font-heading text-3xl font-bold text-tet-gold">T√ÇM TH∆Ø & L·ªòC XU√ÇN</h2>
                <p class="text-tet-cream/90 text-sm mt-1">Xu√¢n ·∫§t T·ªµ 2025 - An Khang Th·ªãnh V∆∞·ª£ng</p>
            </div>
            
            <!-- Content -->
            <div class="p-6 md:p-8">
                <!-- L·ªùi ch√∫c -->
                <div class="text-center mb-6">
                    <div class="text-5xl mb-4">üéä</div>
                    <h3 class="font-heading text-2xl font-bold text-tet-red mb-3">Ch√∫c M·ª´ng NƒÉm M·ªõi!</h3>
                    <p class="text-gray-700 text-lg leading-relaxed">
                        Ch√∫c b·∫°n m·ªôt nƒÉm m·ªõi tr√†n ƒë·∫ßy s·ª©c kh·ªèe, h·∫°nh ph√∫c v√† th√†nh c√¥ng. 
                        Mong r·∫±ng nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t s·∫Ω ƒë·∫øn v·ªõi b·∫°n v√† gia ƒë√¨nh.
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Ph·∫ßn c√†o l·ªôc xu√¢n -->
                    <div class="">
                        <div class="bg-white/80 rounded-lg p-4 mb-4">
                            <p class="text-gray-600 text-sm mb-2">C√†o ƒë·ªÉ nh·∫≠n l·ªôc xu√¢n</p>
                            <div id="scratch-area" class="bg-gradient-to-r from-gray-200 to-gray-300 h-16 rounded-lg relative cursor-pointer flex items-center justify-center">
                                <div class="absolute inset-0 bg-gradient-to-r from-tet-gold to-tet-gold-dark rounded-lg" id="scratch-overlay"></div>
                                <span class="relative text-tet-red font-bold text-xl">C√ÄO ƒê·ªÇ XEM L·ªòC XU√ÇN</span>
                            </div>
                        </div>
                        <div id="lucky-amount" class="hidden text-3xl font-bold text-tet-red animate-pulse">
                            üéâ 1.000.000 VND üéâ
                        </div>
                    </div>
                    
                    <!-- Ng∆∞·ªùi g·ª≠i -->
                    <div class="text-center border-2 border-tet-gold/30 rounded-xl p-6 bg-gradient-to-br from-red-50 to-amber-50">
                        <div class="text-4xl mb-3">üíå</div>
                        <p class="text-gray-600 mb-2">V·ªõi t·∫•t c·∫£ t·∫•m l√≤ng th√†nh,</p>
                        <p class="font-dancing text-3xl font-bold text-tet-red mb-1">ƒê√†m ƒê√¨nh ƒê√†o</p>
                        <p class="text-gray-500 italic mb-4">Ch√∫c m·ª´ng nƒÉm m·ªõi ·∫§t T·ªµ 2025</p>
                        <div class="text-sm text-gray-600 border-t pt-3">
                            <p>"Mong m·ªôt nƒÉm an khang</p>
                            <p>V·∫°n s·ª± nh∆∞ √Ω, t√†i l·ªôc ƒë·∫ßy nh√†"</p>
                        </div>
                    </div>
                </div>
                
                <!-- N√∫t ƒë√≥ng -->
                <div class="text-center mt-8">
                    <button id="close-modal" class="bg-tet-red text-tet-cream font-semibold px-8 py-3 rounded-full hover:bg-tet-red-light transition-all duration-300">
                        Tr√¢n Tr·ªçng C·∫£m ∆†n
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const defaultConfig = {
            tagline: "G·ª≠i trao y√™u th∆∞∆°ng ‚Äì Nh·∫≠n l·ªôc an khang",
            main_heading: "Ng∆∞·ªùi trao ƒëang g·ª≠i l·ªôc xu√¢n cho..?",
            footer_text: "L·ªôc Xu√¢n 2026",
            background_color: "#1a0a0a",
            card_color: "#8B0000",
            text_color: "#FFF8DC",
            gold_color: "#FFD700",
            accent_color: "#B22222",
        };

        // ===== DEBUG MODE =====
        const DEBUG_MODE = true; // ƒê·ªïi th√†nh false khi deploy production
        // ======================

        let selectedRecipient = null;
        let isModalOpen = false; // TH√äM D√íNG N√ÄY

        // Card selection logic
        document.querySelectorAll(".card-envelope").forEach((card) => {
            card.addEventListener("click", function () {
                // Remove selection from all cards
                document.querySelectorAll(".card-envelope").forEach((c) => {
                    c.classList.remove("selected-card");
                });

                // Add selection to clicked card
                this.classList.add("selected-card");
                selectedRecipient = this.dataset.recipient;

                // Show selection display
                const selectionDisplay = document.getElementById("selection-display");
                const selectedName = document.getElementById("selected-name");
                const continueBtn = document.getElementById("continue-btn");

                const recipientNames = {
                    "ong-ba": "√îng B√†",
                    "bo-me": "B·ªë M·∫π",
                    "anh-chi-em": "Anh Ch·ªã Em",
                    "con-cai": "Con C√°i",
                    "ban-be": "B·∫°n B√®",
                    "dong-nghiep": "ƒê·ªìng Nghi·ªáp",
                    "thay-co": "Th·∫ßy C√¥",
                    "nguoi-thuong": "Ng∆∞·ªùi Th∆∞∆°ng",
                };

                selectedName.textContent = recipientNames[selectedRecipient];
                selectionDisplay.classList.remove("hidden");
                continueBtn.classList.remove("hidden");
            });
        });

        // Continue button click - Show 24 envelopes
        document
            .getElementById("continue-btn")
            .addEventListener("click", function () {
                const envelopesGrid = document.getElementById("envelopes-grid");
                envelopesGrid.innerHTML = "";

                if (selectedRecipient) {
                    // Hide main content
                    document.querySelector(".grid.grid-cols-2").classList.add("hidden");
                    document
                        .getElementById("selection-display")
                        .classList.add("hidden");
                    this.classList.add("hidden");

                    // Show envelopes container
                    const envelopesContainer = document.getElementById(
                        "envelopes-container",
                    );
                    envelopesContainer.classList.remove("hidden");

                    // Generate 24 envelopes
                    const envelopesGrid = document.getElementById("envelopes-grid");
                    envelopesGrid.innerHTML = "";

                    // Hi·ªÉn th·ªã 24 bao l√¨ x√¨ m·ªõi
                    for (let i = 1; i <= 24; i++) {
                        envelopesGrid.appendChild(createEnvelope(i));
                    }
                }
            });

        // Back button - Return to main selection
        document
            .getElementById("back-btn")
            .addEventListener("click", function () {
                // Hide envelopes container
                document
                    .getElementById("envelopes-container")
                    .classList.add("hidden");

                // Show main content
                document
                    .querySelector(".grid.grid-cols-2")
                    .classList.remove("hidden");
                document
                    .getElementById("selection-display")
                    .classList.remove("hidden");
                document.getElementById("continue-btn").classList.remove("hidden");
            });

        // =========== PH·∫¶N T·∫†O BAO L√å X√å M·ªöI ===========
        const luckyMessages = [
            "Ph√°t T√†i Ph√°t L·ªôc",
            "V·∫°n S·ª± Nh∆∞ √ù",
            "An Khang Th·ªãnh V∆∞·ª£ng",
            "T√†i L·ªôc D·ªìi D√†o",
            "S·ª©c Kh·ªèe D·ªìi D√†o",
            "H·∫°nh Ph√∫c Vi√™n M√£n",
            "C√¥ng Th√†nh Danh To·∫°i",
            "M√£ ƒê√°o Th√†nh C√¥ng",
            "Kim Ng·ªçc M√£n ƒê∆∞·ªùng",
            "Ph√∫c L·ªôc Song To√†n",
            "Thu·∫≠n Bu·ªìm Xu√¥i Gi√≥",
            "B√¨nh An H·∫°nh Ph√∫c",
        ];

        const luckySymbols = ["Á¶è", "Á¶Ñ", "ÂØø", "Âñú", "Ë≤°", "Âêâ", "Á••", "Áôº"];

        // Bi·∫øn global ƒë·ªÉ qu·∫£n l√Ω timeout cho t·∫•t c·∫£ envelopes
        let globalClickTimeout = null;
        let lastClickedEnvelope = null;

        function createEnvelope(number) {
            const envelope = document.createElement("div");
            envelope.className = "envelope-item";

            const luckyMessage = luckyMessages[(number - 1) % luckyMessages.length];
            const luckySymbol = luckySymbols[(number - 1) % luckySymbols.length];

            // X√°c ƒë·ªãnh lo·∫°i l√¨ x√¨ d·ª±a tr√™n s·ªë th·ª© t·ª±
            const envelopeTypes = [
                "", // M√†u ƒë·ªè truy·ªÅn th·ªëng
                "envelope-blue", // Xanh d∆∞∆°ng
                "envelope-gold-light", // Xanh l√°
                "envelope-purple", // T√≠m
                "envelope-gold", // V√†ng ƒë·∫≠m
                "",
                // t·ª´ng row
                "envelope-blue",
                "envelope-gold-light",
                "envelope-purple",
                "envelope-gold",
                "",
                "envelope-blue",
                "envelope-gold-light",
                "envelope-purple",
                "envelope-gold",
                "",
                "envelope-blue",
                "envelope-gold-light",
                "envelope-purple",
                "envelope-gold",
                "",
                "envelope-blue",
                "envelope-gold-light",
                "envelope-purple",
            ];

            const envelopeType = envelopeTypes[(number - 1) % envelopeTypes.length];

            // X√°c ƒë·ªãnh lo·∫°i seal
            let sealClass = "gold-seal";
            if (number % 3 === 0) {
                sealClass = "gold-seal silver-seal";
            } else if (number % 5 === 0) {
                sealClass = "gold-seal bronze-seal";
            }

            envelope.innerHTML = `
                <div class="envelope-body">
                    <div class="pattern-overlay"></div>
                    <div class="shimmer"></div>
                    
                    <!-- Corner Decorations -->
                    <div class="corner-decor top-left"></div>
                    <div class="corner-decor top-right"></div>
                    <div class="corner-decor bottom-left"></div>
                    <div class="corner-decor bottom-right"></div>
                    
                    <!-- Flower Decorations -->
                    <div class="flower-decor flower-top-left">üå∏</div>
                    <div class="flower-decor flower-top-right">üå∏</div>
                    <div class="flower-decor flower-bottom-left">üå∏</div>
                    <div class="flower-decor flower-bottom-right">üå∏</div>
                    
                    <!-- Ornamental Bands -->
                    <div class="ornament-pattern ornament-top"></div>
                    <div class="ornament-pattern ornament-bottom"></div>
                    
                    <!-- Wave Patterns -->
                    <div class="wave-pattern wave-top"></div>
                    <div class="wave-pattern wave-bottom"></div>
                    
                    <!-- Diamond Patterns -->
                    <div class="diamond-pattern diamond-1"></div>
                    <div class="diamond-pattern diamond-2"></div>
                    <div class="diamond-pattern diamond-3"></div>
                    <div class="diamond-pattern diamond-4"></div>
                    
                    <!-- Lantern Decorations -->
                    <div class="lantern-decor lantern-left">üèÆ</div>
                    <div class="lantern-decor lantern-right">üèÆ</div>
                    
                    <!-- Gold Dots -->
                    <div class="gold-dots" style="top: 28%; left: 25%;"></div>
                    <div class="gold-dots" style="top: 28%; right: 25%;"></div>
                    <div class="gold-dots" style="top: 40%; left: 20%;"></div>
                    <div class="gold-dots" style="top: 40%; right: 20%;"></div>
                    <div class="gold-dots" style="bottom: 28%; left: 25%;"></div>
                    <div class="gold-dots" style="bottom: 28%; right: 25%;"></div>
                    <div class="gold-dots" style="bottom: 40%; left: 20%;"></div>
                    <div class="gold-dots" style="bottom: 40%; right: 20%;"></div>
                    
                    <!-- Cloud Patterns -->
                    <div class="cloud-pattern cloud-1"></div>
                    <div class="cloud-pattern cloud-2"></div>
                    
                    <!-- Lucky Knot -->
                    <div class="lucky-knot"></div>
                    
                    <!-- Top Flap -->
                    <div class="envelope-flap"></div>
                    
                    <!-- Gold Seal -->
                    <div class="${sealClass}">
                        <span class="seal-text">${luckySymbol}</span>
                    </div>
                    
                    <!-- Lucky Message -->
                    <div class="lucky-message">${luckyMessage}</div>
                    
                    <!-- Number Badge -->
                    <div class="envelope-number">L√¨ X√¨ #${number}</div>
                </div>
            `;

            // Th√™m l·ªõp m√†u cho envelope
            if (envelopeType) {
                envelope.classList.add(envelopeType);
            }



            envelope.addEventListener("click", function () {
                // H·ªßy timeout tr∆∞·ªõc ƒë√≥ n·∫øu c√≥
                if (globalClickTimeout) {
                    clearTimeout(globalClickTimeout);
                }
                
                // X√≥a hi·ªáu ·ª©ng clicked c·ªßa envelope tr∆∞·ªõc ƒë√≥
                if (lastClickedEnvelope && lastClickedEnvelope !== this) {
                    lastClickedEnvelope.classList.remove("clicked");
                }
                
                // Th√™m hi·ªáu ·ª©ng clicked cho envelope hi·ªán t·∫°i
                this.classList.add("clicked");
                lastClickedEnvelope = this;
                
                // L∆∞u reference
                const currentEnvelope = this;
                const currentNumber = number;
                
                // ƒê·∫∑t timeout m·ªõi
                globalClickTimeout = setTimeout(() => {
                    currentEnvelope.classList.remove("clicked");
                    
                    // Ch·ªâ hi·ªán confirm cho l·∫ßn click cu·ªëi c√πng
                    // if (confirm("B·∫°n ƒë√£ ch·∫Øc ch·∫Øn mu·ªën nh·∫≠n bao l√¨ x√¨ #" + currentNumber + " n√†y ch·ª©?")) {
                        console.log("ƒê√£ ch·ªçn l√¨ x√¨ #" + currentNumber);
                        
                        // M·ªü modal T√¢m Th∆∞ & L·ªôc Xu√¢n
                        openHeartLetterModal(currentNumber);
                    // }
                    
                    globalClickTimeout = null;
                    lastClickedEnvelope = null;
                }, 500);
            });

            return envelope;
        }
        // =========== END PH·∫¶N T·∫†O BAO L√å X√å M·ªöI ===========

        // H√†m m·ªü modal T√¢m Th∆∞ & L·ªôc Xu√¢n
        function openHeartLetterModal(envelopeNumber) {
            const modal = document.getElementById('heart-letter-modal');
            const scratchArea = document.getElementById('scratch-area');
            const scratchOverlay = document.getElementById('scratch-overlay');
            const luckyAmount = document.getElementById('lucky-amount');
            
            // Reset tr·∫°ng th√°i
            scratchOverlay.style.opacity = '1';
            luckyAmount.classList.add('hidden');
            
            // Hi·ªÉn th·ªã modal
            modal.classList.remove('hidden');
            
            // X·ª≠ l√Ω c√†o (ch·ªâ g√°n 1 l·∫ßn)
            // scratchArea.onclick = function() {
            //     scratchOverlay.style.opacity = '0';
            //     scratchOverlay.style.transition = 'opacity 0.5s';
                
            //     // Random s·ªë ti·ªÅn may m·∫Øn
            //     const amounts = ['500.000 VND', '1.000.000 VND', '2.000.000 VND', '5.000.000 VND', '10.000.000 VND'];
            //     const randomAmount = amounts[Math.floor(Math.random() * amounts.length)];
                
            //     luckyAmount.textContent = `üéâ ${randomAmount} üéâ`;
                
            //     // Hi·ªÉn th·ªã s·ªë ti·ªÅn v·ªõi animation
            //     setTimeout(() => {
            //         luckyAmount.classList.remove('hidden');
            //     }, 500);
            // };
        }

        // X·ª≠ l√Ω ƒë√≥ng modal - ƒê·∫∂T NGO√ÄI H√ÄM openHeartLetterModal
        document.getElementById('close-modal').addEventListener('click', function() {
            document.getElementById('heart-letter-modal').classList.add('hidden');
        });

        // ƒê√≥ng modal khi click overlay
        document.getElementById('heart-letter-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.add('hidden');
            }
        });
        // end H√†m m·ªü modal T√¢m Th∆∞ & L·ªôc Xu√¢n

        // =========== AUTO SHOW 24 ENVELOPES FOR TESTING ===========
        if (DEBUG_MODE) {
            window.addEventListener('DOMContentLoaded', function() {
                // ·∫®n ph·∫ßn ch·ªçn ng∆∞·ªùi nh·∫≠n
                document.querySelector(".grid.grid-cols-2").classList.add("hidden");
                document.getElementById("selection-display").classList.add("hidden");
                document.getElementById("continue-btn").classList.add("hidden");
                
                // Hi·ªÉn th·ªã container 24 bao l√¨ x√¨
                const envelopesContainer = document.getElementById("envelopes-container");
                envelopesContainer.classList.remove("hidden");
                
                // T·∫°o 24 bao l√¨ x√¨
                const envelopesGrid = document.getElementById("envelopes-grid");
                envelopesGrid.innerHTML = "";
                
                for (let i = 1; i <= 24; i++) {
                    envelopesGrid.appendChild(createEnvelope(i));
                }
                
                // Set selectedRecipient ƒë·ªÉ n√∫t Back v·∫´n ho·∫°t ƒë·ªông
                selectedRecipient = "test-mode";
            });
        }
        // =========== END AUTO SHOW ===========


        // Element SDK initialization
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange: async (config) => {
                    document.getElementById("tagline").textContent =
                        config.tagline || defaultConfig.tagline;
                    document.getElementById("main-heading").textContent =
                        config.main_heading || defaultConfig.main_heading;
                    document.getElementById("footer-text").textContent =
                        config.footer_text || defaultConfig.footer_text;
                },
                mapToCapabilities: (config) => ({
                    recolorables: [
                        {
                            get: () =>
                                config.background_color || defaultConfig.background_color,
                            set: (value) => {
                                config.background_color = value;
                                window.elementSdk.setConfig({ background_color: value });
                            },
                        },
                        {
                            get: () => config.card_color || defaultConfig.card_color,
                            set: (value) => {
                                config.card_color = value;
                                window.elementSdk.setConfig({ card_color: value });
                            },
                        },
                        {
                            get: () => config.text_color || defaultConfig.text_color,
                            set: (value) => {
                                config.text_color = value;
                                window.elementSdk.setConfig({ text_color: value });
                            },
                        },
                        {
                            get: () => config.gold_color || defaultConfig.gold_color,
                            set: (value) => {
                                config.gold_color = value;
                                window.elementSdk.setConfig({ gold_color: value });
                            },
                        },
                        {
                            get: () => config.accent_color || defaultConfig.accent_color,
                            set: (value) => {
                                config.accent_color = value;
                                window.elementSdk.setConfig({ accent_color: value });
                            },
                        },
                    ],
                    borderables: [],
                    fontEditable: undefined,
                    fontSizeable: undefined,
                }),
                mapToEditPanelValues: (config) =>
                    new Map([
                        ["tagline", config.tagline || defaultConfig.tagline],
                        [
                            "main_heading",
                            config.main_heading || defaultConfig.main_heading,
                        ],
                        ["footer_text", config.footer_text || defaultConfig.footer_text],
                    ]),
            });
        }
    </script>
    <script>
        (function () {
            function c() {
                var b = a.contentDocument || a.contentWindow.document;
                if (b) {
                    var d = b.createElement("script");
                    d.innerHTML =
                        "window.__CF$cv$params={r:'9c2ca0b8301704f6',t:'MTc2OTIyNzI2OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
                    b.getElementsByTagName("head")[0].appendChild(d);
                }
            }
            if (document.body) {
                var a = document.createElement("iframe");
                a.height = 1;
                a.width = 1;
                a.style.position = "absolute";
                a.style.top = 0;
                a.style.left = 0;
                a.style.border = "none";
                a.style.visibility = "hidden";
                document.body.appendChild(a);
                if ("loading" !== document.readyState) c();
                else if (window.addEventListener)
                    document.addEventListener("DOMContentLoaded", c);
                else {
                    var e = document.onreadystatechange || function () { };
                    document.onreadystatechange = function (b) {
                        e(b);
                        "loading" !== document.readyState &&
                            ((document.onreadystatechange = e), c());
                    };
                }
            }
        })();
    </script>
</body>

</html>